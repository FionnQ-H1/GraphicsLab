<!DOCTYPE html>

<html>

<head>
    <meta charset="UTF-8">
    <title>Canvas</title>

    <style type="text/css">
        body {
            background-color: white;
        }

        /* Added border for canvas */
        canvas {
            border: 10px solid black;
        }
    </style>

</head>

<body>

    <!-- Added name above canvas-->
    <h1> Fionn Qualter </h1>
    <!-- Added canvas paramaters  -->
    <canvas id="canvas-for-ball" width="400" height="400"></canvas>

    <script type="text/javascript">
        // Gets a handle to the element with id canvasOne.
        var canvas = document.getElementById("canvas-for-ball");
        // Get a 2D context for the canvas.
        var ctx = canvas.getContext("2d");

        // Paddle class (rectangle for base step)
        class Paddle {
            constructor(x, y, width, height, speed) {
                this.x = x;
                this.y = y;
                this.width = width;
                this.height = height;
                this.speed = speed || 6;
            }

            draw() {
                ctx.beginPath();
                ctx.rect(this.x, this.y, this.width, this.height);
                ctx.stroke();
            }

            moveDy(dy) {
                this.y += dy;
                if (this.y < 0) this.y = 0;
                if (this.y + this.height > canvas.height) this.y = canvas.height - this.height;
            }
        }

        var leftPaddle = new Paddle(10, 160, 10, 80, 8);
        var rightPaddle = new Paddle(canvas.width - 20, 160, 10, 80, 8); // mirrored on the right

        // ArrowUp / ArrowDown control the left paddle
        window.addEventListener("keydown", function (e) {
            if (e.key === "ArrowUp") leftPaddle.moveDy(-leftPaddle.speed);
            if (e.key === "ArrowDown") leftPaddle.moveDy(leftPaddle.speed);

            // W / S control the right paddle
            if (e.key === "w" || e.key === "W") rightPaddle.moveDy(-rightPaddle.speed);
            if (e.key === "s" || e.key === "S") rightPaddle.moveDy(rightPaddle.speed);
        });

        // Mouse moves the left paddle to the cursor's Y (canvas-relative, centered)
        canvas.addEventListener("mousemove", function (e) {
            var rect = canvas.getBoundingClientRect();
            var y = e.clientY - rect.top;
            leftPaddle.y = y - leftPaddle.height / 2;

            if (leftPaddle.y < 0) leftPaddle.y = 0;
            if (leftPaddle.y + leftPaddle.height > canvas.height) {
                leftPaddle.y = canvas.height - leftPaddle.height;
            }
        });

        function repeatme() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            leftPaddle.draw();
            rightPaddle.draw();

            window.requestAnimationFrame(repeatme);
        }

        // Get the animation going.
        repeatme();
    </script>

</body>

</html>
